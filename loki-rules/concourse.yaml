namespace: concourse
groups:
    - name: general
      rules:
          - alert: ConcourseProductionErrorRate
            expr: 'sum by (data_resource, data_pipeline, data_command, data_error, host) (count_over_time({application="concourse", environment="operations-production"} | json | SYSLOG_IDENTIFIER="concourse" | level="error"[5m])) > 5'
            for: 5m
            labels:
              severity: warning
              testing: true
            annotations:
                description: A high number of errors have been detected in the production concourse environment.
          - alert: ConcourseQAErrorRate
            expr: 'sum by (data_resource, data_pipeline, data_command, data_error, host) (count_over_time({application="concourse", environment="operations-qa"} | json | SYSLOG_IDENTIFIER="concourse" | level="error"[5m])) > 5'
            for: 5m
            labels:
              severity: warning
              testing: true
            annotations:
                description: A high number of errors have been detected in the qa concourse environment.

