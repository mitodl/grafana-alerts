namespace: linux-host
groups:
    - name: disk-usage
      rules:
        - alert: DiskUsageWarning
          expr: |-
            (host_filesystem_used_ratio{device=~"/dev.*",filesystem!~"(squashfs|vfat)",job="integrations/linux_host"} * 100) > 80
          for: 1h
          labels:
            severity: warning
          annotations:
            description: Filesystem on {{ $labels.device }} at {{ $labels.instance }} is {{ printf "%.2f" $value }}% full.
        - alert: DiskUsageCritical
          expr: |-
            (host_filesystem_used_ratio{device=~"/dev.*",filesystem!~"(squashfs|vfat)",job="integrations/linux_host"} * 100) > 95
          for: 10m
          labels:
            severity: critical
          annotations:
            description: Filesystem on {{ $labels.device }} at {{ $labels.instance }} is {{ printf "%.2f" $value }}% full.
